# This is a basic workflow to showcase the use of Reusable Workflows

name: caller

on:
  workflow_dispatch:

jobs:
  do-it:
    runs-on: ubuntu-latest
    env:
      CORE_ENVIRONMENT: ${secrets.CORE_ENVIRONMENT}
    outputs:
      title: " ${{github.event_name}} ${{github.job}}"
      request: "Author: ${{github.actor}} Branch: ${{github.head_ref}} Target_Branch: ${{github.base_ref}} PR_ID: ${{github.run_number}}"
      result: "Result ${{job.status}}"

    steps:
      - uses: actions/checkout@v2

      - name: Run a one-line script
        id: tests
        run: |
          echo "${{secrets.SLACK_WEBHOOK}} | sed 's/./& /g'"
          echo "CONM_SECRET_KEY_BASE_DEV=${secrets.CORE_ENVIRONMENT}"
          echo "CONM_SECRET_KEY_BASE_DEV=${CORE_ENVIRONMENT}"
  called:
    needs: do-it
    uses: suraj129/sample_githubrunner/.github/workflows/called.yml@main
    with:
      title: "${{ needs.do-it.outputs.title }}"
      request: "${{ needs.do-it.outputs.request }}"
      result: "${{ needs.do-it.outputs.result }}"
